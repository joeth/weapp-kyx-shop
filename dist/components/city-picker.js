"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),_wepy=require("./../npm/wepy/lib/wepy.js"),_wepy2=_interopRequireDefault(_wepy),_cityData=require("./../utils/cityData.js"),_cityData2=_interopRequireDefault(_cityData),CityPicker=function(t){function e(){var t,i,n,s;_classCallCheck(this,e);for(var o=arguments.length,a=Array(o),r=0;r<o;r++)a[r]=arguments[r];return i=n=_possibleConstructorReturn(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(a))),n.components={},n.props={selected:{type:String,default:"",twoWay:!0,coerce:function(t){return console.log("coerce selected",t),t||""}}},n.data={cityData:[],provinces:[],citys:[],countys:[],province:"",city:"",county:"",value:[0,0,0],values:[0,0,0],isReady:!1},n.events={showPicker:function(){var t=this.$wxpage.selectComponent(".J_Picker_Popup");t&&t.show()},hidePicker:function(){var t=this.$wxpage.selectComponent(".J_Picker_Popup");t&&t.hide()}},n.watch={},n.methods={tap:function(){},onCancel:function(){this.$emit("hidePicker")},onConfirm:function(){this.selected=this.province+" "+this.city+" "+this.county,this.$emit("hidePicker")},onChange:function(t){var e=t.detail.value,i=this.values;if(e[0]!=i[0]){console.log("province no ");for(var n=[],s=[],o=0;o<this.cityData[e[0]].sub.length;o++)n.push(this.cityData[e[0]].sub[o].name);for(var a=0;a<this.cityData[e[0]].sub[0].sub.length;a++)s.push(this.cityData[e[0]].sub[0].sub[a].name);return this.province=this.provinces[e[0]],this.city=this.cityData[e[0]].sub[0].name,this.citys=n,this.county=this.cityData[e[0]].sub[0].sub[0].name,this.countys=s,this.values=e,void(this.value=[e[0],0,0])}if(e[1]!=i[1]){console.log("city no");for(var r=[],c=0;c<this.cityData[e[0]].sub[e[1]].sub.length;c++)r.push(this.cityData[e[0]].sub[e[1]].sub[c].name);return this.city=this.citys[e[1]],this.county=this.cityData[e[0]].sub[e[1]].sub[0].name,this.countys=r,this.values=e,void(this.value=[e[0],e[1],0])}if(e[2]!=i[2])return console.log("county no"),this.county=this.countys[e[2]],void(this.values=e)}},s=i,_possibleConstructorReturn(n,s)}return _inherits(e,t),_createClass(e,[{key:"onShow",value:function(){console.log("onShow")}},{key:"onLoad",value:function(){this.cityData=_cityData2.default;for(var t=this.selected.split(" ")||[],e=[],i=[],n=[],s=0;s<this.cityData.length;s++)e.push(this.cityData[s].name);var o=e.findIndex(function(e){return e==t[0]});o=o<0?0:o;for(var a=0;a<this.cityData[o].sub.length;a++)i.push(this.cityData[o].sub[a].name);var r=i.findIndex(function(e){return e==t[1]});r=r<0?0:r;for(var c=0;c<this.cityData[o].sub[r].sub.length;c++)n.push(this.cityData[o].sub[r].sub[c].name);var u=n.findIndex(function(e){return e==t[2]});u=u<0?0:u,this.provinces=e,this.citys=i,this.countys=n,this.value=[o,r,u],this.values=[o,r,u],this.province=this.cityData[o].name,this.city=this.cityData[o].sub[r].name,this.county=this.cityData[o].sub[r].sub[u].name,this.isReady=!0}}]),e}(_wepy2.default.component);exports.default=CityPicker;